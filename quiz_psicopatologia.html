<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Psicopatologia - Sistema di Verifica</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.2em;
            font-weight: 300;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .controls {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .checkbox-group {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 8px 12px;
            border-radius: 6px;
            border: 2px solid #dee2e6;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .checkbox-item:hover {
            border-color: #3498db;
            background: #f8f9ff;
        }
        
        .checkbox-item input[type="checkbox"] {
            margin: 0;
            transform: scale(1.1);
            cursor: pointer;
        }
        
        .checkbox-item label {
            font-size: 0.9em;
            color: #2c3e50;
            cursor: pointer;
            font-weight: 500;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #27ae60;
            color: white;
        }
        
        .btn-success:hover {
            background: #229954;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        
        .btn-warning:hover {
            background: #e67e22;
            transform: translateY(-2px);
        }
        
        .btn-exam {
            background: #8e44ad;
            color: white;
        }
        
        .btn-exam:hover {
            background: #7d3c98;
            transform: translateY(-2px);
        }
        
        .search-box {
            flex: 1;
            min-width: 250px;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .quiz-container {
            padding: 20px;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .question {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #3498db;
            transition: all 0.3s ease;
        }
        
        .question:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .question.correct {
            border-left-color: #27ae60;
            background: linear-gradient(90deg, #d5f4e6 0%, #f8f9fa 100%);
        }
        
        .question.incorrect {
            border-left-color: #e74c3c;
            background: linear-gradient(90deg, #fadbd8 0%, #f8f9fa 100%);
        }
        
        .question-number {
            font-weight: bold;
            color: #3498db;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .question-text {
            font-size: 1.05em;
            margin-bottom: 15px;
            line-height: 1.5;
            color: #2c3e50;
        }
        
        .options {
            display: grid;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border: 2px solid #dee2e6;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .option:hover {
            border-color: #3498db;
            transform: translateX(3px);
        }
        
        .option.correct-answer {
            border-color: #27ae60;
            background: #d5f4e6;
            font-weight: 500;
        }
        
        .option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }
        
        .option.selected.correct {
            border-color: #27ae60;
            background: #d5f4e6;
        }
        
        .option.selected.incorrect {
            border-color: #e74c3c;
            background: #fadbd8;
        }
        
        .option input[type="radio"] {
            margin: 0;
            transform: scale(1.2);
        }
        
        .result {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
            margin-top: 10px;
        }
        
        .result.correct {
            color: #27ae60;
        }
        
        .result.incorrect {
            color: #e74c3c;
        }
        
        .result-icon {
            font-size: 1.2em;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #dee2e6;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db 0%, #27ae60 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .exam-mode-indicator {
            background: #8e44ad;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: 500;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
                gap: 20px;
            }
            
            .checkbox-group {
                justify-content: center;
            }
            
            .quiz-container {
                padding: 15px;
            }
            
            .question {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Quiz di Psicopatologia</h1>
            <p>Sistema di verifica interattivo per l'esame</p>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalQuestions">0</div>
                <div class="stat-label">Domande totali</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="correctAnswers">0</div>
                <div class="stat-label">Risposte corrette</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="percentage">0%</div>
                <div class="stat-label">Percentuale</div>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="controls">
            <input type="text" class="search-box" id="searchBox" placeholder="üîç Cerca domande...">
            
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="randomQuestions" onchange="toggleRandomQuestions()">
                    <label for="randomQuestions">üé≤ Domande Random</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="randomAnswers" onchange="toggleRandomAnswers()">
                    <label for="randomAnswers">üîÄ Risposte Random</label>
                </div>
            </div>
            
            <button class="btn btn-exam" onclick="simulateExam()">üéì Simula Esame</button>
            <button class="btn btn-primary" onclick="checkAllAnswers()">‚úÖ Verifica tutte</button>
            <button class="btn btn-warning" onclick="resetQuiz()">üîÑ Reset</button>
            <button class="btn btn-success" onclick="showOnlyIncorrect()">‚ùå Solo sbagliate</button>
        </div>
        
        <div class="quiz-container" id="quizContainer">
            <!-- Le domande verranno generate qui -->
        </div>
    </div>

    <script>
        const originalQuestions = [{"id":1,"text":"Quale tra i seguenti disturbi legati all'ansia non presenta prevalenza nelle femmine che nei maschi","options":["attacchi di panico","disturbo da ansia generalizzata","disturbo da ansia da separazione","fobie specifiche"],"correct":1},{"id":2,"text":"Il disturbo bipolare √® presente","options":["prevalentemente nelle femmine","prevalentemente nei maschi","in maniera indiscriminata in entrambi i sessi"],"correct":2},{"id":3,"text":"In che percentuale gli abusi sessuali provocano il disturbo borderline di personalit√†","options":["50%","60%","70%","80%"],"correct":2},{"id":4,"text":"In quale tipo di attaccamento si manifesta difficolt√† a mostrare le emozioni","options":["sicuro","insicuro ambivalente","insicuro evitante","disorientato disorganizzato"],"correct":2},{"id":5,"text":"In quale tipo di attaccamento si manifesta un'espressione emotiva esagerata","options":["sicuro","insicuro ambivalente","insicuro evitante","disorientato disorganizzato"],"correct":1},{"id":6,"text":"Chi parla di scala di isolotti di capacit√†?","options":["Bettelheim","Kanner","Asperger","Bleuler"],"correct":1},{"id":7,"text":"Chi conia il termine autismo:","options":["Bettelheim","Kanner","Asperger","Bleuler"],"correct":3},{"id":8,"text":"Quale tra i seguenti disturbi dell'autismo non fa parte dei comportamenti non verbali:","options":["Alterazioni nel contatto occhio-ad-occhio","Ritardi nella capacit√† di acquisizione e di comprensione dei gesti comunicativi e simbolici","Carenze nelle abilit√† imitative","Presenza ridotta del sorriso sociale"],"correct":1},{"id":9,"text":"Cosa si intende per psicopatologia dello sviluppo","options":["Disciplina che studia le origini e i percorsi dei pattern individuali dei comportamenti disadattivi","Disciplina che studia i percorsi di pattern individuali dei comportamenti disadattivi","Disciplina che studia le origini di pattern individuali dei comportamenti disadattivi","Disciplina che studia le origini e i percorsi dei pattern individuali dei comportamenti adattivi"],"correct":0},{"id":10,"text":"Quale non √® un ambito della developmental psychopathology:","options":["infant research","teoria dell'attaccamento","neuroscienze","ricerca informatica"],"correct":3},{"id":11,"text":"Chi forma l'idea della costellazione materna primaria","options":["Stern","Winnicott","Freud","Anna Freud"],"correct":0},{"id":12,"text":"Di quali elementi parler√† Kraepelin:","options":["Multifinalit√† e equifinalit√†","Multifinalit√† e decisione","Equifinalit√† e personalit√†","Nessuna delle risposte"],"correct":0},{"id":13,"text":"A chi non pu√≤ essere somministrato il test delle macchie di Rorschach:","options":["Adolescenti","Bambini","Anziani","nessuna di queste"],"correct":3},{"id":14,"text":"Quale tra i seguenti disturbi non rientrano nei precursori delle relazioni sociali negli individui con diagnosi di autismo?","options":["Presenza ridotta del sorriso sociale","Decremento delle vocalizzazioni/verbalizzazioni dirette agli altri tra i 6 ed i 12 mesi","Deficit nelle iniziative che nel mantenimento dell'attenzione condivisa, rilevabili gi√† a 14 mesi","Carenza del coinvolgimento sociale"],"correct":3},{"id":15,"text":"Quale non prende in considerazione Kanner?","options":["isolamento","ripetitivit√†","isolotti di capacit√†","disturbi del linguaggio"],"correct":2},{"id":16,"text":"Chi parla di modelli evolutivi:","options":["Lewis","Mahler","Winnicott","Freud"],"correct":0},{"id":17,"text":"Quanta probabilit√† ha un bambino nato da due genitori schizofrenici di sviluppare la psicopatologia:","options":["10%","20%","30%","40%"],"correct":3},{"id":18,"text":"Con quanta probabilit√† un bambino nato da madre bipolare sviluppo il disturbo:","options":["40%","50%","60%","70%"],"correct":1},{"id":19,"text":"Con quanta percentuale chi √® stato abusato sessualmente da piccolo diventa a sua volta un molestatore?","options":["20-30%","10-20%","50-60%","40%"],"correct":0},{"id":20,"text":"In quanti cluster si dividono i disturbi di personalit√†?","options":["4","5","3","9"],"correct":2},{"id":21,"text":"Quale tra questi non √® un sintomo del disturbo borderline?","options":["Rapporti interpersonali tumultuosi","Affetti dominati dalla rabbia e da un sentimento di vuoto","Impulsivit√†","Afasia"],"correct":3},{"id":22,"text":"Quale non rientra nelle manifestazioni d'ansia","options":["Inquietudine relativa al futuro","Rabbia nei confronti dei genitori","Capricci","timori relativi al passato"],"correct":1},{"id":23,"text":"Quale continuit√† presenta chi varia la diagnosi nel tempo?","options":["omotipica","eterotipica","finale","nessuna delle opzioni"],"correct":1},{"id":24,"text":"Se la persona non √® consapevole del proprio disturbo si parla di:","options":["disturbo egosintonico","disturbo egodistonico","disturbo recessivo","disturbo reale"],"correct":0},{"id":25,"text":"Quale non √® una scala per la misurazione dell'ansia","options":["Spence Children Anxiety Scale","State-Trait Anxiety Inventory","Separation Anxiety Assessment Scale for Children","Test dell'attaccamento"],"correct":3},{"id":26,"text":"Per diagnosticare il disturbo dell'umore dirompente secondo il DSM-5, i sintomi devono essere presenti per:","options":["9 mesi o pi√π","15 mesi o pi√π","6 mesi o pi√π","12 mesi o pi√π"],"correct":3},{"id":27,"text":"Nella sindrome di Tourette secondo il DSM-5, i sintomi devono essere presenti per un minimo di:","options":["9 mesi","12 mesi","11 mesi","10 mesi"],"correct":1},{"id":28,"text":"In quale dei seguenti disturbi d'ansia non √® stata rilevata la maggior prevalenza nelle bambine rispetto ai bambini?","options":["fobie specifiche","disturbo d'ansia sociale","attacchi di panico","disturbo d'ansia di separazione"],"correct":1},{"id":29,"text":"La diagnosi per un adulto secondo il PDM-II parte dall'asse:","options":["M","D","P","S"],"correct":2},{"id":30,"text":"Il ritiro sociale accomuna i pazienti con disturbo evitante di personalit√† e i pazienti con:","options":["disturbo schizoide di personalit√†","disturbo paranoide di personalit√†","disturbo dipendente di personalit√†","disturbo ossessivo-compulsivo di personalit√†"],"correct":1},{"id":31,"text":"Lo studio di Rinne e collaboratori (2002) prende in considerazione, come campione:","options":["uomini affetti da disturbo di personalit√† borderline e soggetti di controllo sani","donne affette da disturbo di personalit√† borderline e soggetti di controllo sani","donne affette da disturbo di personalit√† narcisistico e soggetto di controllo sani","uomini affetti da disturbo di personalit√† narcisistico e soggetti di controllo sani"],"correct":1},{"id":32,"text":"Il disturbo ossessivo-compulsivo non ha comorbidit√† specifiche con:","options":["disturbo d'ansia sociale","disturbo da deficit dell'attenzione con iperattivit√†","disturbi del sonno","disturbo oppositivo"],"correct":2},{"id":33,"text":"Qual √® il periodo della vita pi√π difficile da affrontare per un paziente narcisista?","options":["vecchiaia","et√† adulta","infanzia","adolescenza"],"correct":0},{"id":34,"text":"Quale non √® un denominatore comune della sindrome \"caotica\" (borderline) di Ginker e collaboratori?","options":["depressione pervasiva","alti livelli di ansia","difficolt√† nelle relazioni interpersonali","rabbia come affetto principale o esclusivo"],"correct":1},{"id":35,"text":"Il concetto di costellazione materna √® di:","options":["A","Stern","S. Freud","Melanie Klein"],"correct":1},{"id":36,"text":"Quale aspetto non √® stato rilevato dalla Societ√† Italiana di neuropsichiatria dell'infanzia e dell'adolescenza rispetto ai disturbi depressivi in et√† evolutiva?","options":["frequenza minore rispetto al passato","difficolt√† di diagnosi","sviluppo di cronicit√†","alto rischio di comorbidit√† con altre patologie"],"correct":0},{"id":37,"text":"Secondo Kernberg esiste un continuum tra il disturbo narcisistico di personalit√† e:","options":["nessuna delle precedenti","disturbo borderline di personalit√†","disturbo antisociale di personalit√†","disturbo ossessivo-compulsivo di personalit√†"],"correct":1},{"id":38,"text":"La diagnosi che si concentra sugli aspetti che accomunano le persone-generalizzabilit√†:","options":["nomotetica","politetica","ideografica","funzionale"],"correct":0},{"id":39,"text":"La semplificazione delle espressioni emozionali √® tipica di quale tipo di attaccamento:","options":["disorganizzato","evitante","sicuro","ambivalente/resistente"],"correct":2},{"id":40,"text":"Quali sono i livelli di gravit√† dello spettro autistico secondo il DSM-5:","options":["5","2","3","4"],"correct":2},{"id":41,"text":"Comprensione del narcisismo secondo Kohut. Quale affermazione non √® corretta?","options":["oggetto come estensione del s√© che fornisce al soggetto funzioni mancanti","struttura con fusione tra s√© reale, s√© ideale e oggetto ideale","arresto evolutivo in una fase specifica cha ha minato la coesione del s√©","presenza di oggetti-s√© arcaici e poco adeguati"],"correct":1},{"id":42,"text":"Seguendo Sanislow et. al. (2000/2002) qual √® il criterio che meglio permette la diagnosi differenziale:","options":["paura di essere rifiutato","desiderio di stare al centro dell'attenzione","senso di vuoto","instabilit√† emotiva"],"correct":3},{"id":43,"text":"Qual √® uno dei meccanismi difensivi chiave nel disturbo di personalit√† paranoide?","options":["dissociazione","introiezione","diniego","proiezione"],"correct":1},{"id":44,"text":"Quale non √® una componente della triade psichica di Stern:","options":["donna come madre","madre con il suo bambino","madre come moglie"],"correct":2},{"id":45,"text":"Quale non √® stato identificato come fattore di rischio per lo sviluppo di disturbi depressivi?","options":["disturbo del sonno del genitore","disordini psichiatrici cronici in uno dei due genitori","maltrattamento fisico o abuso","depressione post-partum materna"],"correct":0},{"id":46,"text":"All'interno del PDM, a quale fascia d'et√† si riferisce la sezione infanzia?","options":["4-12 anni","4-9 anni","4-10 anni","4-11 anni"],"correct":3},{"id":47,"text":"Quale dei seguenti disturbi in et√† evolutiva sembra predire lo sviluppo del disturbo antisociale di personalit√†?","options":["disturbo alimentare","disturbo depressivo","disturbo d'ansia","ADHD"],"correct":3},{"id":48,"text":"Quale non √® una delle discipline che afferisce alla Developmental Psychology:","options":["infant research","psicologia cognitiva","neuroscienze affettive","teoria dell'attaccamento"],"correct":1},{"id":49,"text":"Quale non √® un modello esplicativo dei disturbi dello spettro autistico:","options":["Deficit della teoria della mente","deficit primario della relazione interpersonale","deficit della consistenza centrale","deficit delle funzioni esecutive"],"correct":2},{"id":50,"text":"Quale non √® una caratteristica dei pazienti con disturbo ossessivo-compulsivo di personalit√†?","options":["perfezionismo","difficolt√† interpersonali","ritiro sociale","scarsa autostima"],"correct":2},{"id":51,"text":"Quale non √® un aspetto chiave del narcisismo teorizzato da Kohut?","options":["rabbia per mancata gratificazione dei bisogni infantili","molta invidia verso gli altri","oggetto inteso come un'estensione del s√©","se arcaico congelato"],"correct":1},{"id":52,"text":"Gli studi prospettici sui bambini a rischio di ASD hanno rilevato una finestra temporale di insorgenza dei primi sintomi compresa tra:","options":["il primo semestre e i 36 mesi di vita","il secondo semestre e i 24 mesi di vita","il secondo semestre e i 36 mesi di vita","il primo semestre e i 24 mesi di vita"],"correct":2},{"id":53,"text":"Chi ha parlato di comunicazione affettiva genitoriale disgregata?","options":["main e hesse","stern","bowlby","Karen Lyons-Ruth"],"correct":3},{"id":54,"text":"Non √® una caratteristica del DSM","options":["multiassiale","categoriale","usa il concetto di spettro","attenzione culturale"],"correct":0},{"id":55,"text":"A che et√† il bambino inizia ad avere paura della morte?","options":["7-8 anni","6-7 anni","prima infanzia","4-5 anni"],"correct":3},{"id":56,"text":"Chi introdusse il concetto di madre frigorifero?","options":["kanner","bettelheim","bleuer","asperger"],"correct":1},{"id":57,"text":"Quante sono le sottofasi del processo di separazione-individuazione della Mahler?","options":["2","3","6","4"],"correct":2},{"id":58,"text":"Nel disturbo reattivo dell'attaccamento, con quale disturbo non deve essere fatta la diagnosi differenziale?","options":["disabilit√† intellettiva","disturbi ansiosi","disturbi depressivi","disturbo dello spettro autistico"],"correct":1},{"id":59,"text":"Quale non √® una delle 4 aree coinvolte nel vissuto emozionale dell'ansia secondo il PDM-II?","options":["area comportamentale","area somatica","area affettiva","area cognitiva"],"correct":0},{"id":60,"text":"Quale aspetto non troviamo nel sistema di codifica AMBIANCE per la valutazione delle interazioni genitore-bambino?","options":["comportamento intrusivi o negativi","disorientamento","errori affettivi","inversione dei ruoli"],"correct":1},{"id":61,"text":"I due principi derivanti dalla teoria dei sistemi di von Bertalanffy sono:","options":["nessuna delle precedenti","equifinalit√† e multifinalit√†","plurifinalit√† e equifinalit√†","multifinalit√† e plurifinalit√†"],"correct":1},{"id":62,"text":"La tendenza alla vergogna propria dei pazienti con DBP a cosa non √® correlata secondo Rusch?","options":["impulsivit√†","bassa autostima","ansia"],"correct":1},{"id":63,"text":"Quale non √® una delle aree compromesse nel disturbo depressivo della prima infanzia secondo il DC:0-5?","options":["area esplorazione mondo esterno","area vegetativa","area dell'adattamento personale e familiare","area cognitiva"],"correct":3},{"id":64,"text":"Chi fu a coniare il termine \"autismo\"?","options":["bleuler","winnicott","bettelheim","kanner"],"correct":0},{"id":65,"text":"amplificazione delle espressione emozionali √® tipica di quale tipo di attaccamento:","options":["sicuro","evitante","ambivalente/resistente","disorganizzato"],"correct":2},{"id":66,"text":"Il PDM-II adotta un sistema:","options":["prototipico","politetico","nomotetico","nomotetico"],"correct":0},{"id":67,"text":"Alcuni studi indicano una correlazione genetica con la schizofrenia per:","options":["il disturbo ossessivo-compulsivo di personalit√†","il disturbo schizotipico e schizoide di personalit√†","il disturbo schizotipico di personalit√†","il disturbo schizoide di personalit√†"],"correct":1},{"id":68,"text":"L'asse sintomatologico del disturbo oppositivo-provocatorio √® rappresentato da:","options":["rabbia e aggressivit√†","rabbia e insensibilit√†","rabbia e comportamenti antisociali","rabbia, aggressivit√† e insensibilit√†"],"correct":1},{"id":69,"text":"Il lausanne trilogue play √® rivolto a quale fascia d'et√†?","options":["0-18 anni","0-15 anni","0-16 anni","0-17 anni"],"correct":3},{"id":70,"text":"Secondo i Centers for Disease Control and Prevention, I disturbi dello spettro autistico sono:","options":["Non ci sono differenze tra maschi e femmine","Pi√π frequenti nelle femmine","Pi√π frequenti nei maschi","Non √® stato possibile calcolarne la frequenza"],"correct":2},{"id":71,"text":"Quale non √® una caratteristica della diagnosi descrittiva:","options":["Descrizione dettagliata dei fenomeni clinici","Condivisibile","Si basa su di una teoria","Non si interessa della relazione tra sintomi"],"correct":2},{"id":72,"text":"Quale non √® una caratteristica del narcisista inconsapevole di Kernberg?","options":["Spesso noioso senza accorgersene","Ipersensibile a come gli altri reagiscono","Desideroso di stare al centro dell'attenzione","Insensibile ai bisogni altrui"],"correct":1},{"id":73,"text":"Quale non √® un aspetto della comprensione psicodinamica del narcisismo secondo Kernberg?","options":["Oggetto inteso come separato dal s√©","Aggressivit√† che origina da mancate gratificazioni dei bisogni infantili","S√© grandioso come difesa contro l'investimento degli altri","Invidia verso gli altri"],"correct":2},{"id":74,"text":"Quale non √® una delle aree intorno a cui possono ruotare le ossessioni dei pazienti con DOC secondo il PDM-2?","options":["Area del dubbio e del controllo","Area della paura e della contaminazione","Area dell'ansia e dell'ordine","Area della simmetria e dell'ordine"],"correct":2},{"id":75,"text":"Nel DOC quale istanza psichica ha pi√π potere?","options":["io","es","super io"],"correct":2},{"id":76,"text":"Quale manuale diagnostico √® strutturato in 3 assi:","options":["DC","PDM","DSM"],"correct":1},{"id":77,"text":"Relazione fra attaccamento disorganizzato e disturbo dipendente:","options":["sono in grossomodo presenti entrambi","√® pi√π presente il disturbo dipendente","√® pi√π prevalente l'attaccamento disorganizzato"],"correct":0},{"id":78,"text":"Nella psicometria quale metodo √® pi√π utilizzato:","options":["indagini statistiche e nosografiche","osservazione diretta","test proiettivi"],"correct":0},{"id":79,"text":"Cosa √® l'idiografia:","options":["approccio metodologico che si concentra sulla comprensione dettagliata di un singolo individuo","studio delle popolazioni","analisi statistica dei dati"],"correct":0},{"id":80,"text":"Definizione di anedonia:","options":["mancanza di piacere e interesse nelle attivit√† quotidiane","eccesso di energia","iperattivazione emotiva"],"correct":0},{"id":81,"text":"Cos'√® l'alessitimia:","options":["capacit√† di esprimere emozioni","non saper riconoscere e parlare dei propri stati emotivi","disturbo della memoria"],"correct":1},{"id":82,"text":"In questo disturbo cosa manca principalmente:","options":["controllo degli impulsi","deficit della mentalizzazione","capacit√† cognitive"],"correct":1},{"id":83,"text":"La paura che qualcuno attacchi il proprio ruolo:","options":["√® tipico del Disturbo paranoico","√® tipico del disturbo borderline","√® tipico del disturbo narcisistico"],"correct":0},{"id":84,"text":"Metodo di Bowlby per prevenire e capire la linea evolutiva del bambino:","options":["resoconti dei genitori","osservazione diretta del bambino","osservare le reazioni del bambino"],"correct":2},{"id":85,"text":"L'ansia implica un sistema cognitivo:","options":["pi√π evoluto della paura","meno evoluto della paura","egualmente evoluto alla paura"],"correct":0},{"id":86,"text":"Caratteristiche sindrome di Asperger (incentrate su):","options":["empatia","quoziente intellettivo","difficolt√† cognitive"],"correct":0},{"id":87,"text":"L'ideazione paranoide caratterizza vari disturbi di personalit√†, quale tra questi NON lo √®:","options":["borderline","schizotipico","schizoide"],"correct":2},{"id":88,"text":"Quali di questi autori si sono incentrati sul ruolo della madre nello sviluppo evolutivo:","options":["Mahler","Kanner","Freud"],"correct":0},{"id":89,"text":"Secondo lo studio neozelandese qual √® la percentuale di sviluppo di una psicopatologia da 1 a 45 anni:","options":["73%","86%","92%"],"correct":1},{"id":90,"text":"Nella genesi della depressione c'√®:","options":["separazione dal caregiver","mantenimento dell'attaccamento","ravvicinamento con il caregiver"],"correct":1},{"id":91,"text":"La psicopatia e l'antisociale secondo il DSM sono:","options":["sinonimi","antisociale sotto tipico di psicopatia","psicopatia sotto tipo di antisociale"],"correct":1},{"id":92,"text":"Di Sameroff quale modello indica l'influenza del contesto:","options":["Rappresentazionale","Transazionale","Comportamentale"],"correct":0},{"id":93,"text":"Quale disturbo ha un attaccamento verso gli oggetti:","options":["Disturbo dello spettro autistico e disturbo di personalit√† dipendente","disturbo dello spettro autistico e disturbo da deficit di attenzione e iperattivit√†","disturbo da deficit di attenzione e iperattivit√† e disturbo di personalit√† dipendente"],"correct":0},{"id":94,"text":"Resilienza:","options":["fattori protettivi che portano allo sviluppo sano","assenza di stress","capacit√† innata"],"correct":0},{"id":95,"text":"Elencati criteri del narcisismo, quale manca:","options":["Invidia verso gli altri, o sensazione che gli altri siano invidiosi di lui","senso di grandiosit√†","bisogno di ammirazione"],"correct":0},{"id":96,"text":"I disturbi del pensiero riguardano:","options":["Forma e contenuto","solo forma","solo contenuto"],"correct":0},{"id":97,"text":"Disturbo antisociale e psicopatia:","options":["sono sinonimi","la psicopatia rientra nell'antisociale","l'antisociale rientra nella psicopatia"],"correct":1},{"id":98,"text":"Struttura PDM:","options":["due categorie","tre categorie","quattro categorie"],"correct":1},{"id":99,"text":"Il DSM 5 non √®:","options":["Multiassiale","Categoriale","Descrittivo"],"correct":0},{"id":100,"text":"Disturbo per il DSM-5 implica:","options":["sofferenza riportata dal paziente","solo sintomi osservabili","durata minima di un anno"],"correct":0},{"id":101,"text":"Costellazione materna:","options":["rapporto tra madre e figlio","nuova struttura psichica della madre","rapporto con figlio e nonni e genitori"],"correct":1},{"id":102,"text":"La costellazione materna cos'√®:","options":["rapporto tra madre e figlio","rapporto con figlio e nonni e genitori","situazione della neo mamma"],"correct":2},{"id":103,"text":"Autismo... Disinteresse verso:","options":["Oggetti","stimoli sociali","sia stimoli sociali che oggetti"],"correct":1},{"id":104,"text":"La vendicativit√† √® una caratteristica del:","options":["disturbo oppositivo provocatorio","disturbo della condotta","disturbo esplosivo intermittente"],"correct":0},{"id":105,"text":"In quali di questi c'√® il sentimento della vergogna:","options":["narcisistico e DOC","evitante e narcisistico","DOC e evitante"],"correct":1},{"id":106,"text":"Cosa √® cambiato dal DSM dopo il passaggio al WHO/WHAT:","options":["approccio dimensionale","valutazione funzionale","criteri diagnostici"],"correct":1},{"id":107,"text":"Empatia √®:","options":["Caratteristica dimensionale","Caratteristica categoriale","Innata"],"correct":0},{"id":108,"text":"Scatti di rabbia e incontrollati che non permettono la giusta regolazione emotiva sono caratteristici di:","options":["attaccamento evitante","disorganizzato","attaccamento sicuro"],"correct":1},{"id":109,"text":"Cosa √® secondo Stern il prototipo nella psicopatologia dello sviluppo:","options":["rapporto madre bambino","bambino clinico","bambino recuperato"],"correct":0},{"id":110,"text":"Chi ha dato contributi per scoprire l'autismo:","options":["Mahler","Bettelheim","Kanner"],"correct":1},{"id":111,"text":"Pur di essere accettato e ben voluto dagli altri sarebbe disposto ad accettare un compito, anche se non gli piace √® una caratteristica della patologia:","options":["schizoide","narcisistica","dipendente"],"correct":2},{"id":112,"text":"Una parte fondamentale del disturbo d'ansia √®:","options":["rapporto costante con il caregiver","separazione dal caregiver","conflitto con il caregiver"],"correct":1},{"id":113,"text":"L'ansia implica un sistema cognitivo:","options":["pi√π evoluto della paura","meno evoluto della paura","egualmente evoluto alla paura"],"correct":0},{"id":114,"text":"Il caso del piccolo Hans rappresenta:","options":["il bambino osservato","il bambino reale","il bambino riconosciuto"],"correct":0},{"id":115,"text":"Azioni mentali che ti spingono:","options":["ossessioni","compulsioni","fobie"],"correct":1},{"id":116,"text":"Prospettive di Kernberg:","options":["operazioni difensive, identit√† dell'io e esame di realt√†","solo meccanismi di difesa","solo identit√† dell'io"],"correct":0},{"id":117,"text":"Nel disturbo depressivo maggiore quale caratteristica permane anche se i livelli si abbassano o alzano:","options":["il sonno","energia","concentrazione"],"correct":2},{"id":118,"text":"Cos'√® l'alessitimia:","options":["capacit√† di riconoscere emozioni","non saper riconoscere e parlare dei propri stati emotivi","disturbo dell'umore"],"correct":1},{"id":119,"text":"In questo disturbo cosa manca principalmente:","options":["controllo comportamentale","deficit della mentalizzazione","capacit√† relazionali"],"correct":1},{"id":120,"text":"Nell'ambito della valutazione psicodiagnostica, la tradizione psicometrica enfatizza:","options":["le caratteristiche metodologiche e statistiche delle nosografie e dei loro strumenti di valutazione","l'aspetto qualitativo","l'interpretazione clinica"],"correct":0},{"id":121,"text":"Secondo Lyons-Ruth alla base dei disturbi della condotta, vi √®:","options":["il comportamento ostile-impotente della madre","fattori genetici","ambiente sociale"],"correct":0},{"id":122,"text":"Quale delle seguenti opzioni definisce correttamente una caratteristica dell'empatia:","options":["√® una caratteristica dimensionale che pu√≤ essere frutto di apprendimento","√® innata","√® categoriale"],"correct":0},{"id":123,"text":"Quale tra questi aspetti NON caratterizza la comunicazione affettiva genitore-bambino alla base dei disturbi della condotta:","options":["incapacit√† di contenere emozioni negative","la tendenza del genitore a trascurare i propri bisogni","comportamenti che inducono paura"],"correct":1},{"id":124,"text":"Nell'ambito del DSM-5, il passaggio dell'utilizzo della scala VGF alla WHODAS 2.0 ha consentito:","options":["valutazione pi√π accurata","la valutazione di domini specifici in aggiunta ad un indice generale","riduzione dei tempi"],"correct":1},{"id":125,"text":"Nel bambino sintomi che hanno una durata di 1-3 mesi e riguardano la relazione in momenti specifici costituiscono:","options":["disturbi relazionali","perturbazioni relazionali","turbe dello sviluppo"],"correct":1},{"id":126,"text":"L'emozione centrale che √® tenuta nel disturbo della fobia sociale √® la:","options":["paura","vergogna","ansia"],"correct":1},{"id":127,"text":"Secondo la prospettiva dell'attaccamento, quale delle seguenti fasi √® maggiormente implicata nella genesi dei disturbi d'ansia:","options":["attaccamento sicuro","separazione dal caregiver","esplorazione"],"correct":1},{"id":128,"text":"Si definisce fattore di rischio:","options":["un fattore che aumenta la probabilit√† che un dato individuo sviluppi un esito psicopatologico","una causa diretta","un sintomo"],"correct":0},{"id":129,"text":"Quale tra le seguenti opzioni descrive correttamente una differenza tra il disturbo da impegno sociale disinibito e il disturbo reattivo dell'attaccamento:","options":["sono identici","solo il disturbo da impegno sociale disinibito pu√≤ manifestarsi in assenza di attaccamento disturbato","solo il reattivo"],"correct":1},{"id":130,"text":"Quale delle seguenti caratteristiche consente di distinguere tra i disturbi dipendente e borderline di personalit√†:","options":["reazioni rabbiose all'abbandono","dipendenza","instabilit√†"],"correct":0},{"id":131,"text":"Secondo il DSM-5, l'inibizione in situazioni interpersonali per sentimenti di inadeguatezza √® un criterio di:","options":["disturbo borderline","disturbo evitante di personalit√†","disturbo dipendente"],"correct":1},{"id":132,"text":"Ricerche neuroscientifiche hanno correlato la depressione a disfunzioni:","options":["nell'asse ipotalamo-ipofisi-surrene","nella corteccia visiva","nel cervelletto"],"correct":0},{"id":133,"text":"Su cosa si basa la diagnosi strutturale secondo il modello di Otto Kernberg:","options":["solo sintomi","esame di realt√†, integrazione dell'identit√† e meccanismi di difesa","solo meccanismi di difesa"],"correct":1},{"id":134,"text":"Quale dei seguenti disturbi di personalit√† √® considerato pi√π vicino allo spettro della schizofrenia:","options":["disturbo borderline","disturbo schizotipico di personalit√†","disturbo paranoide"],"correct":1},{"id":135,"text":"Qual √® il meccanismo di difesa principale nell'organizzazione borderline di personalit√† secondo il modello di Otto Kernberg:","options":["negazione","Scissione","proiezione"],"correct":1},{"id":136,"text":"Emozioni intense che travolgono la capacit√† del bambino di organizzare una strategia coerente e funzionale di regolazione emotiva caratterizzano:","options":["l'attaccamento sicuro","l'attaccamento disorganizzato","l'attaccamento evitante"],"correct":1},{"id":137,"text":"Quali tra questi aspetti NON caratterizza la comunicazione affettiva genitore e bambino alla base dei disturbi della condotta:","options":["Tendenza del genitore a trascurare i propri bisogni","Incapacit√† di contenere le emozioni negative del bambino","La presenza di comportamenti che inducono paura nel bambino"],"correct":0},{"id":138,"text":"Quale dei seguenti disturbi di personalit√† pu√≤ essere caratterizzato da una manifestazione di freddezza emotiva distacco affettivit√† appiattita:","options":["Disturbo antisociale di personalit√†","Disturbo evitante di personalit√†","Disturbo schizoide di personalit√†"],"correct":2},{"id":139,"text":"Quale dei seguenti fattori non √® un criterio necessario per la diagnosi di disturbo reattivo dell'attaccamento secondo il DSM:","options":["Difficolt√† nella regolazione emotiva","Comportamento inibito e ritirato","Tendenza a mentire a non assumersi responsabilit√† per le proprie azioni"],"correct":2},{"id":140,"text":"Fantasie onnipotenti possono caratterizzare il mondo interno di pazienti con disturbo di personalit√†:","options":["Schizoide","Ossessivo compulsivo","Antisociale"],"correct":0},{"id":141,"text":"Nel bambino sintomi che hanno durata 1-3 mesi riguardano la relazione in momenti specifici costituiscono:","options":["Turbe dello sviluppo","Perturbazioni relazionali","Disturbi relazionali"],"correct":1},{"id":142,"text":"Secondo Ruth comportamenti genitoriali punitivi e controllanti rappresentano un fattore di rischio per i disturbi:","options":["D'ansia","Depressivi","Della condotta"],"correct":1},{"id":143,"text":"La presenza di quale delle seguenti caratteristiche differenzia la concezione del narcisismo di Kernberg e quella di Kohut:","options":["Invidia","Rabbia aggressivit√†","Idealizzazione"],"correct":0},{"id":144,"text":"Secondo i pi√π recenti modelli neurobiologici il disturbi d'ansia sono determinati primariamente da:","options":["Processi di condizionamento classico","Processi corticali superiori di valutazione soggettiva di stimoli esterni","Una bassa sensibilit√† dell'amigdala in risposta a stimoli che attirano l'attenzione dell'individuo"],"correct":0},{"id":145,"text":"Quale dei seguenti disturbi risponde meglio in termini prognostici al cambiamento delle situazioni ambientali che riducono le condizioni di trascuratezza cui il bambino era esposto:","options":["Disturbo reattivo dell'attaccamento","Disturbo da deficit di attenzione e iperattivit√†","Disturbo da impegno sociale disinibito"],"correct":0},{"id":146,"text":"Secondo una prospettiva psicoanalitica quale istanza psichica √® principalmente implicata nei disturbi d'ansia:","options":["Es","Io","Super-io"],"correct":1},{"id":147,"text":"La resilienza √® rappresentata da:","options":["Assenza di fattori di rischio","Una predisposizione temperamentale a sviluppare una personalit√† sana","Presenza di fattori protettivi che favoriscono l'adattamento a fronte di difficolt√†"],"correct":2},{"id":148,"text":"Quale delle seguenti opzioni definisce correttamente una caratteristica dell'empatia:","options":["√à una caratteristica dimensionale che pu√≤ essere frutto di apprendimento","√à una caratteristica categoriale che pu√≤ essere frutto di apprendimento","√à una caratteristica categoriale innata"],"correct":0},{"id":149,"text":"Quale dei seguenti meccanismi di difesa si presenta prima nel corso dello sviluppo infantile:","options":["Reversal","Freezing","Fighting"],"correct":1},{"id":150,"text":"Ricerche neuroscientifiche hanno correlato la depressione a disfunzioni:","options":["Nella corteccia prefrontale","Nei processi di condizionamento operante","Nell'asse ipotalamo ipofisi surrene"],"correct":0},{"id":151,"text":"Secondo Bleuler l'autismo era:","options":["Aspetto sintomatologico della schizofrenia","Aspetto sintomatologico della depressione","Aspetto sintomatologico della disabilit√† intellettiva"],"correct":0},{"id":152,"text":"Nei criteri del DSM-5 per la diagnosi di disturbo della personalit√† narcisista √® presente:","options":["Invidia","Empatia","Altruismo"],"correct":0},{"id":153,"text":"√à pi√π primitiva la paura o l'ansia:","options":["Paura","Ansia","Entrambi"],"correct":0},{"id":154,"text":"Disturbo da impegno sociale disinibito pu√≤ manifestarsi:","options":["Solo in assenza di attaccamento","Sia in presenza che in assenza di attaccamento","Solo in presenza di attaccamento"],"correct":1},{"id":155,"text":"Cosa viene valutato nel modello di Kernberg:","options":["Diffusione e integrazione identit√†, meccanismi di difesa prevalenti, integrit√† e compromissione esame di realt√†","Solo meccanismi di difesa","Solo identit√†"],"correct":0},{"id":156,"text":"Nel DSM-5 si introduce:","options":["WHO-DAS-2 al posto dell'asse 5 per valutare funzionamento globale","Nuovi assi diagnostici","Criteri dimensionali"],"correct":0},{"id":157,"text":"Paura a cosa √® riconducibile:","options":["Lotta o fuga","Attaccamento","Esplorazione"],"correct":0},{"id":158,"text":"Sameroff come terapia per i disturbi umore propone:","options":["Riparazione, ridefinizione, rieducazione","Solo farmacoterapia","Solo psicoterapia"],"correct":0},{"id":159,"text":"In che disturbo personalit√† ci sono legami con oggetti:","options":["Paranoide","Borderline","Narcisistico"],"correct":0},{"id":160,"text":"Percentuale popolazione neozelandese con almeno una diagnosi:","options":["73%","86%","92%"],"correct":1},{"id":161,"text":"Struttura assi PDM comprende:","options":["Sindromi personalit√†, profilo di funzionamento mentale, esperienza soggettiva","Solo sindromi","Solo funzionamento"],"correct":0}];

        let questions = [...originalQuestions];
        let userAnswers = {};
        let filteredQuestions = [...questions];
        let showAllCorrectAnswers = false;
        let randomQuestions = false;
        let randomAnswers = false;
        let examMode = false;

        // Funzione per mescolare un array (Fisher-Yates shuffle)
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Funzione per preparare le domande con risposte randomizzate
        function prepareQuestionsWithRandomAnswers(questionsArray) {
            return questionsArray.map(question => {
                if (!randomAnswers) return question;

                const optionsWithIndex = question.options.map((option, index) => ({
                    text: option,
                    originalIndex: index
                }));

                const shuffledOptions = shuffleArray(optionsWithIndex);
                
                return {
                    ...question,
                    options: shuffledOptions.map(opt => opt.text),
                    correct: shuffledOptions.findIndex(opt => opt.originalIndex === question.correct)
                };
            });
        }

        function simulateExam() {
            // Reset dello stato
            userAnswers = {};
            showAllCorrectAnswers = false;
            examMode = true;
            
            // Seleziona 31 domande casuali
            const shuffledQuestions = shuffleArray([...originalQuestions]);
            questions = shuffledQuestions.slice(0, 31);
            
            // Applica randomizzazione delle risposte se attiva
            questions = prepareQuestionsWithRandomAnswers(questions);
            
            // Aggiorna le domande filtrate
            filteredQuestions = [...questions];
            
            // Reset della ricerca
            document.getElementById('searchBox').value = '';
            
            renderQuestions();
        }

        function toggleRandomQuestions() {
            randomQuestions = document.getElementById('randomQuestions').checked;
            applyRandomization();
        }

        function toggleRandomAnswers() {
            randomAnswers = document.getElementById('randomAnswers').checked;
            applyRandomization();
        }

        function applyRandomization() {
            // Non applicare se siamo in modalit√† esame
            if (examMode) return;
            
            // Ripristina le domande originali
            questions = [...originalQuestions];
            
            // Applica randomizzazione risposte
            questions = prepareQuestionsWithRandomAnswers(questions);
            
            // Applica randomizzazione domande
            if (randomQuestions) {
                questions = shuffleArray(questions);
            }
            
            // Aggiorna le domande filtrate
            filteredQuestions = [...questions];
            
            // Pulisci le risposte salvate poich√© le posizioni potrebbero essere cambiate
            userAnswers = {};
            showAllCorrectAnswers = false;
            
            // Re-renderizza
            renderQuestions();
        }

        function renderQuestions() {
            const container = document.getElementById('quizContainer');
            container.innerHTML = '';
            
            // Aggiungi indicatore modalit√† esame
            if (examMode) {
                const examIndicator = document.createElement('div');
                examIndicator.className = 'exam-mode-indicator';
                examIndicator.textContent = 'üéì Modalit√† Simulazione Esame - 31 domande casuali';
                container.appendChild(examIndicator);
            }
            
            filteredQuestions.forEach((question, displayIndex) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.id = `question-${question.id}`;
                
                const userAnswer = userAnswers[question.id];
                let questionClass = '';
                if (userAnswer !== undefined) {
                    questionClass = userAnswer === question.correct ? 'correct' : 'incorrect';
                    questionDiv.className += ` ${questionClass}`;
                }
                
                questionDiv.innerHTML = `
                    <div class="question-number">Domanda ${randomQuestions || examMode ? displayIndex + 1 : question.id}</div>
                    <div class="question-text">${question.text}</div>
                    <div class="options">
                        ${question.options.map((option, index) => {
                            let optionClass = 'option';
                            if ((userAnswer !== undefined || showAllCorrectAnswers) && index === question.correct) {
                                optionClass += ' correct-answer';
                            }
                            if (userAnswer === index) {
                                optionClass += ' selected';
                                if (userAnswer === question.correct) optionClass += ' correct';
                                else optionClass += ' incorrect';
                            }
                            
                            return `
                                <label class="${optionClass}">
                                    <input type="radio" name="q${question.id}" value="${index}" 
                                           ${userAnswer === index ? 'checked' : ''}
                                           onchange="selectAnswer(${question.id}, ${index})">
                                    ${String.fromCharCode(97 + index)}. ${option}
                                </label>
                            `;
                        }).join('')}
                    </div>
                    ${(userAnswer !== undefined || showAllCorrectAnswers) ? `
                        <div class="result ${userAnswer === question.correct ? 'correct' : 'incorrect'}">
                            <span class="result-icon">${userAnswer === question.correct ? '‚úÖ' : '‚úñÔ∏è'}</span>
                            ${userAnswer === question.correct ? 'Risposta corretta! ‚úì' : 
                              userAnswer !== undefined ? `Risposta sbagliata. La risposta corretta √®: ${String.fromCharCode(97 + question.correct)} ‚úñÔ∏è` :
                              `Risposta corretta: ${String.fromCharCode(97 + question.correct)} ‚úì`}
                        </div>
                    ` : ''}
                `;
                
                container.appendChild(questionDiv);
            });
            
            updateStats();
        }

        function selectAnswer(questionId, answerIndex) {
            userAnswers[questionId] = answerIndex;
            renderQuestions();
        }

        function checkAllAnswers() {
            showAllCorrectAnswers = true;
            renderQuestions();
        }

        function resetQuiz() {
            userAnswers = {};
            filteredQuestions = [...originalQuestions];
            showAllCorrectAnswers = false;
            examMode = false;
            document.getElementById('searchBox').value = '';
            
            // Reset delle checkbox
            document.getElementById('randomQuestions').checked = false;
            document.getElementById('randomAnswers').checked = false;
            randomQuestions = false;
            randomAnswers = false;
            
            // Ripristina le domande originali
            questions = [...originalQuestions];
            filteredQuestions = [...questions];
            
            renderQuestions();
        }

        function showOnlyIncorrect() {
            filteredQuestions = questions.filter(q => 
                userAnswers[q.id] !== undefined && userAnswers[q.id] !== q.correct
            );
            renderQuestions();
        }

        function updateStats() {
            const totalAnswered = Object.keys(userAnswers).length;
            const correctCount = Object.keys(userAnswers).filter(id => 
                userAnswers[id] === questions.find(q => q.id == id).correct
            ).length;
            const percentage = totalAnswered > 0 ? Math.round((correctCount / totalAnswered) * 100) : 0;
            
            document.getElementById('totalQuestions').textContent = questions.length;
            document.getElementById('correctAnswers').textContent = `${correctCount}/${totalAnswered}`;
            document.getElementById('percentage').textContent = `${percentage}%`;
            
            const progressPercentage = totalAnswered > 0 ? (totalAnswered / questions.length) * 100 : 0;
            document.getElementById('progressFill').style.width = `${progressPercentage}%`;
        }

        function searchQuestions() {
            // Disabilita la ricerca in modalit√† esame
            if (examMode) return;
            
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            filteredQuestions = questions.filter(q => 
                q.text.toLowerCase().includes(searchTerm) ||
                q.options.some(option => option.toLowerCase().includes(searchTerm))
            );
            renderQuestions();
        }

        // Event listeners
        document.getElementById('searchBox').addEventListener('input', searchQuestions);

        // Inizializzazione
        renderQuestions();
    </script>
</body>
</html>
